\chapter{DTD definition for configuration files}
Here we define two DTD definition for two xml files for configuration.

\section{RoT file DTD: rot.dtd}
\label{sec:rotdtd}

%definietion for dtd
\begin{verbatim}
<!DOCTYPE ROT [
<!ELEMENT ROT (header,coreADs,signatures)>
<!ELEMENT header (version,issueDate,expireDate,policyNumber,ISDID,policyThreshold,certificateThreshold)>
<!ELEMENT version (#PCDATA)>
<!ELEMENT issueDate (#PCDATA)>
<!ELEMENT expireDate (#PCDATA)>
<!ELEMENT policyNumber (#PCDATA)>
<!ELEMENT ISDID (#PCDATA)>
<!ELEMENT policyThreshold (#PCDATA)>
<!ELEMENT certificateThreshold (#PCDATA)>
<!ELEMENT coreADs (coreAD+)>
<!ELEMENT signatures (coreAD+)>
<!ELEMENT coreAD (AID,(cert|sign))>
<!ELEMENT AID (#PCDATA)>
<!ELEMENT cert (#PCDATA)>
<!ELEMENT sign (#PCDATA)>
]>
\end{verbatim}

This dtd indicates that produceed rot xml file should follow the rules.
\begin{enumerate}
	\item The document root element is ROT.
	\item Element ROT has three child elements, header, coreADS, and signatures which must occur once, and only once.
	\item Element header has four child elements as well. Similary, they are only allowed to define once, and only once.
	\item Elemenet coreADs and signatures should has at least one child element coreAD.
	\item Element coreAD could be contain AID element and either cert or sign element.
\end{enumerate}

\begin{SaveVerbatim}{RotSample}
<?xml version="1.0" standalone="no" ?>
<!DOCTYPE document SYSTEM "rot.dtd">
<ROT>
	<header>
		<version>0x0001</version>
		<issueDate>Fir Jul 6 15:44:25 EDT 2012</issueDate>
		<expireDate>Fir Jul 6 15:44:25 EDT 2013</expireDate>
		<policyNumber>2</policyNumber>
		<ISDID>12345</ISDID>
		<policyThreshold>2</policyThreshold>
		<certificateThreshold>2</certificateThreshold>
	</header>
	<coreADs>
		<coreAD>
			<AID>321</AID>
			<cert>TESTBUB</cert>
		</coreAD>
		<coreAD>
			<AID>322</AID>
			<cert>TESTBUB</cert>
		</coreAD>
	</coreADs>
	<signatures>
		<coreAD>
			<AID>321</AID>
			<sign>TESTSIGNATURE</sign>
		</coreAD>
		<coreAD>
			<AID>321</AID>
			<sign>TESTSIGNATURE</sign>
		</coreAD>
	</signatures>
</ROT>
\end{SaveVerbatim}

Sample RoT xml file could be defined as follows:

\BUseVerbatim[fontsize=\footnotesize]{RotSample}

\section{Topology file DTD: topology.dtd}
\label{sec:topologydtd}

%definietion for dtd
\begin{verbatim}
<!DOCTYPE Topology [
<!ELEMENT Topology (header,Servers,BorderRouters,Gateways,Signature)>
<!ELEMENT header (version,issueDate,ISDID,ADID)>
<!ELEMENT version (#PCDATA)>
<!ELEMENT issueDate (#PCDATA)>
<!ELEMENT ISDID (#PCDATA)>
<!ELEMENT ADID (#PCDATA)>
<!ELEMENT Servers (BeaconServer,PathServer,CertificateServer)>
<!ELEMENT BeaconServer (AID)>
<!ELEMENT PathServer (AID)>
<!ELEMENT CertificateServer (AID)>
<!ELEMENT BorderRouters (Router+)>
<!ELEMENT Router (AID,Interface+)>
<!ELEMENT Interface (IFID,NeighborAD,NeighborType)>
<!ELEMENT IFID (#PCDATA)>
<!ELEMENT NeighborAD (#PCDATA)>
<!ELEMENT NeighborType (#PCDATA)>
<!ELEMENT Gateways (Gateway+)>
<!ELEMENT Gateway (AID,Protocol)>
<!ELEMENT AID (#PCDATA)>
<!ELEMENT Protocol (#PCDATA)>
<!ELEMENT Signature (#PCDATA)>
]>
\end{verbatim}

%This dtd indicates that produceed rot xml file should follow the rules.
%\begin{enumerate}
%	\item The document root element is ROT.
%	\item Element ROT has three child elements, header, coreADS, and signatures which must occur once, and only once.
%	\item Element header has four child elements as well. Similary, they are only allowed to define once, and only once.
%	\item Elemenet coreADs should has at least one child element coreAD.
%	\item Element signature has an attribute called AID which is a required field.
%\end{enumerate}

\begin{SaveVerbatim}{TopoSample}
<?xml version="1.0" standalone="no" ?>
<!DOCTYPE document SYSTEM "topology.dtd">
<Topology>
	<header>
		<version>0x0001</version>
		<issueDate>Fir Jul 6 15:44:25 EDT 2012</issueDate>
		<ISDID>54321</ISDID>
		<ADID>12345</ADID>
	</header>
	<Servers>
		<BeaconServer><AID>12345-1</AID></BeaconServer>
		<PathServer><AID>12345-2</AID></PathServer>
		<CertificateServer><AID>12345-3</AID></CertificateServer>
	</Servers>
	<BorderRouters>
		<Router>	
			<AID>12345-4</AID>
			<Interface>
				<IFID>0xef123456</IFID>
				<NeighborAD>12346</NeighborAD>
				<NeighborType>0x0001</NeighborType>
			</Interface>
			<Interface>
				<IFID>0xef123457</IFID>
				<NeighborAD>12347</NeighborAD>
				<NeighborType>0x0001</NeighborType>
			</Interface>
			<Interface>
				<IFID>0xef123458</IFID>
				<NeighborAD>12348</NeighborAD>
				<NeighborType>0x0001</NeighborType>
			</Interface>
		</Router>
	</BorderRouters>
	<Gateways>
		<Gateway>
			<AID>12345-5</AID>
			<Protocol>ICMP</Protocol>
		</Gateway>
	</Gateways>
	<Signature>TESTSIGNATURE</Signature>
</Topology>
\end{SaveVerbatim}

Sample Topology xml file could be defined as follows:

\BUseVerbatim[fontsize=\footnotesize]{RotSample}
